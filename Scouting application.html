<!DOCTYPE html>
<html id= "background">

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
</head>

<body>
        <div onclick ="toggleDarkMode()" class="d-inline form-check form-switch d-flex justify-content-end">
            <input class="d-inline form-check-input" type="checkbox" role="switch" id="darkModeSwitch">
            <label class="d-inline form-check-label" for="darkModeSwitch">Dark mode (rough)</label>
        </div>
        <h1>Match Scoring</h1> 

    

    <!--start with an input area to enter the team number and the match number-->
   
    <label for="teamNumber">Team Number:</label>

    <input type="number" id="teamNumber" required
           minlength="2" maxlength="6" size="8">

    <label for="matchNumber">Match Number:</label>

    <input type="number" id="matchNumber" required
           minlength="1" maxlength="2" size="4">
    <div class="mb-1">
        <button onclick="saveMatch()" class="btn btn-primary">Save</button>
     </div>

       
    <!--Define tabs-->
    <ul class="nav nav-pills mb-3" id="pills-tab">
        <li class="nav-item">
            <button class="nav-link active" id="pills-autonomous-tab" data-bs-toggle="pill"
                data-bs-target="#pills-autonomous" type="button">Autonomous</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="pills-drivercontrol-tab" data-bs-toggle="pill"
                data-bs-target="#pills-drivercontrol" type="button">Driver Control</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="pills-team-tab" data-bs-toggle="pill" data-bs-target="#pills-team"
                type="button">Team Information</button>
        </li>
            <li class="nav-item">
            <button class="nav-link" id="pills-match-tab" data-bs-toggle="pill" data-bs-target="#pills-match"
                type="button">Match Results</button>
        </li>

    </ul>

<!--add content for each of the defined tabs-->
    <div class="tab-content">

        <!--Autonomous -->
        <div class="tab-pane fade show active" id="pills-autonomous">
            <h3>Autonomous Scoring</h3>
            <div class="text-center">


                <div class="d-flex justify-content-center">
                    <div class="w-50">
                        <span id="autonPointsTotal">0</span><span> Autonomous Control Points</span>
                    </div>
                </div>

                <div class="d-flex justify-content-center">
                    <div style="width: 5rem;">
                        <p></p>
                    </div>
                    <div style="width: 1rem;">
                        <p>Cube</p>
                    </div>
                    <div style="width: 10rem;"></div>
                        <p>Cone</p>
                </div>


                <div class="d-flex justify-content-center">
                    <div style="width:6rem">
                        <p></p>
                    </div>
                    <p id="autonCubeHighTotal">0</p>
                    <div style="width: 10rem;"></div>
                    <p id="autonConeHighTotal">0</p>
                </div>
    
                <div class="d-flex justify-content-center">
                    <div style="width: 2rem;">
                        <p>High</p>
                    </div>
                    <div style="width: 5rem;"></div>
                    <div>
                        <button onclick="adjustDisplay(1,'autonCubeHighTotal')" type="button" class="btn btn-primary">+</button>
                        <button onclick="adjustDisplay(-1, 'autonCubeHighTotal')" type="button" class="btn btn-danger">-</button>
                    </div>
                    <div style="width: 6rem;"></div>
                    <div>
                        <button onclick="adjustDisplay(1, 'autonConeHighTotal')" type="button" class="btn btn-primary">+</button>
                        <button onclick="adjustDisplay(-1, 'autonConeHighTotal')" type="button" class="btn btn-danger">-</button>
                    </div>
                </div>





            <div class="d-flex justify-content-center">
                <div style="width:6rem">
                    <p></p>
                </div>
                <p id="autonCubeMidTotal">0</p>
                <div style="width: 10rem;"></div>
                <p id="autonConeMidTotal">0</p>
            </div>

            <div class="d-flex justify-content-center">
                <div style="width: 2rem;">
                    <p>Medium</p>
                </div> 
                <div style="width: 5rem;"></div>
                <div>
                    <button onclick="adjustDisplay(1,'autonCubeMidTotal')" type="button" class="btn btn-primary">+</button>
                    <button onclick="adjustDisplay(-1,'autonCubeMidTotal')" type="button" class="btn btn-danger">-</button>
                </div>
                <div style="width: 6rem;"></div>
                <div>
                    <button onclick="adjustDisplay(1,'autonConeMidTotal')" type="button" class="btn btn-primary">+</button>
                    <button onclick="adjustDisplay(-1,'autonConeMidTotal')" type="button" class="btn btn-danger">-</button>
                </div>
            </div>

            
            <div class="d-flex justify-content-center">
                <div style="width:6rem">
                    <p></p>
                </div>
                <p id="autonCubeLowTotal">0</p>
                <div style="width: 10rem;"></div>
                <p id="autonConeLowTotal">0</p>
            </div>


            <div class="d-flex justify-content-center">
                <div style="width: 2rem;">
                    <p>Low</p>
                </div>
                <div style="width: 5rem;"></div>
                <div>
                    <button onclick="adjustDisplay(1,'autonCubeLowTotal')" type="button" class="btn btn-primary">+</button>
                    <button onclick="adjustDisplay(-1,'autonCubeLowTotal')" type="button" class="btn btn-danger">-</button>
                </div>
                <div style="width: 6rem;"></div>
                <div>
                    <button onclick="adjustDisplay(1,'autonConeLowTotal')" type="button" class="btn btn-primary">+</button>
                    <button onclick="adjustDisplay(-1,'autonConeLowTotal')" type="button" class="btn btn-danger">-</button>
                </div>
            </div>
            

            

            <div class="d-flex justify-content-around mt-5">
                <div class="form-check">
                    <input onclick="autonEnableEngagedClickable()" class="form-check-input" type="checkbox" value="" id="autonDockedCheckbox">
                    <label class="form-check-label" for="autonDockedCheckbox">
                    Docked?
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="autonEngagedCheckbox" disabled>
                    <label class="form-check-label" for="autonEngagedCheckbox">
                    Engaged?
                    </label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="autonMobilityBonusCheckbox">
                    <label class="form-check-label" for="autonMobilityBonusCheckbox">
                    Mobility Bonus?
                    </label>
                </div>
            </div>

            <div class="mt-5 d-flex justify-content-center">
                <label for="autonWinnerRadio">Who won Auton?</label>
            </div>
            <div class="btn-group" role="group" aria-label="autonWinnerRadio">
                <input type="radio" class="btn-check" name="btnradio" id="autonRadioBlueWin" autocomplete="off" checked>
                <label class="btn btn-outline-primary" for="autonRadioBlueWin">Blue</label>
                
                <input type="radio" class="btn-check" name="btnradio" id="autonTieRadio" autocomplete="off">
                <label id="autonTieRadioButton" class="btn btn-outline-dark" for="autonTieRadio">Tie</label>
                
                <input type="radio" class="btn-check" name="btnradio" id="autonRadioRedWin" autocomplete="off">
                <label class="btn btn-outline-danger" for="autonRadioRedWin">Red</label>
            </div>

            <div class="mt-5">
                <label for="inputPassword5" class="form-label">Any notes?</label>
                <input type="text" id="inputPassword5" class="form-control" aria-describedby="textInput">
            </div>
<!--

            <div class="d-flex justify-content-around">
                <p>Cone</p>
                <div>
                    <label for="Button group with nested dropdown">0</label>
                    <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                        <button type="button" class="btn btn-danger">-</button>
                        <button type="button" class="btn btn-primary">+</button>
                    </div>
                </div>
                
                <div>
                    <label for="Button group with nested dropdown">0</label>
                    <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                        <button type="button" class="btn btn-secondary">-</button>
                        <button type="button" class="btn btn-secondary">+</button>
                    </div>
                </div>
                
            <div>
                <label for="Button group with nested dropdown">0</label>
                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                    <button type="button" class="btn btn-secondary">-</button>
                    <button type="button" class="btn btn-secondary">+</button>
                </div>
            </div>
            </div>





            <div class="d-flex justify-content-around">
                <p>Cube</p>
                <div>
                    <label for="Button group with nested dropdown">0</label>
                    <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                        <button type="button" class="btn btn-secondary">-</button>
                        <button type="button" class="btn btn-secondary">+</button>
                    </div>
                </div>
                
                <div>
                    <label for="Button group with nested dropdown">0</label>
                    <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                        <button type="button" class="btn btn-secondary">-</button>
                        <button type="button" class="btn btn-secondary">+</button>
                    </div>
                </div>
                
            <div>
                <label for="Button group with nested dropdown">0</label>
                <div class="btn-group" role="group" aria-label="Button group with nested dropdown">
                    <button type="button" class="btn btn-secondary">-</button>
                    <button type="button" class="btn btn-secondary">+</button>
                </div>
            </div>
            </div>























                
        <!--Driver Control-->
        <div class="tab-pane fade" id="pills-drivercontrol">
            <h3>Driver Control Scoring</h3>
            <p>
            <div class="text-center">
                <span id="driverPointsTotal">0</span> Driver Control Points
                <div class="mb-1">
                    <button onclick="adjustDislpay(1,'driverPointsTotal')" class="btn btn-primary">Add Block</button>
                    <button onclick="adjustDislpay(-1,'driverPointsTotal')" class="btn btn-danger">Remove Block</button>
                </div>
                <div class="mb-1">
                    <button onclick="adjustDislpay(2,'driverPointsTotal')" class="btn btn-primary">Add Cone</button>
                    <button onclick="adjustDislpay(-2,'driverPointsTotal')" class="btn btn-danger">Remove Cone</button>
                </div>
            </div>
            </p>
        </div>

        <!--Teams Information page-->
        <div class="tab-pane fade" id="pills-team">
            <h3>Team Information Page</h3>
            <p>
            <div class="text-center">
                <span id="teamInfo">Team Information Page</span>
            </div>
            </p>
        </div>

         <!--Match Results page-->
         <!-- This shows the final results of the match from Blue Alliance. It includes all the teams in the match, and the official results. It also includes all of the data we have collected on the match-->
        <div class="tab-pane fade" id="pills-match-tab">
            <h3>Match Results Page</h3>

            <div class="text-center">
                <span id="matchResults">Match Results Page</span>
            </div>

        </div>

        <script>

            let team = {
                number: null,
                competition: null,
                teamNotes:null,
                matches:[]
            }

            // This is a java script comment. We are doing inline javascript
            // Javascript has 3 levels of variables - var, let and const. Var - global variable. Wonky. let - similar to var, but preserves scope. const is a constant memory location that can be defined once.
            function save() {
                team.number=Number(document.getElementById("teamNumber").value);
                const data = JSON.stringify(team);
                window.localStorage.setItem("teamInfo", data);
            }

            function load() {
                const data = window.localStorage.getItem("teamInfo")
                team = JSON.parse(data);
            }

            function adjustDisplay(amt,pointTarget) {
                const pointsTotalField = document.getElementById(pointTarget);
                let pointsTotalArr = String(pointsTotalField.innerText);
                let pointsTotalArr2 = pointsTotalArr.split(" ");
                const pointsTotal = Number(pointsTotalArr2[0]);
                if (pointsTotal + amt < 0) {
                    pointsTotalField.innerText = 0; 
                }
                else {
                    pointsTotalField.innerText = pointsTotal + amt;
                }
                //driverTotalPointsCalc();
                autonTotalPointsCalc();
            }

            function driverTotalPointsCalc() {
                let driverPointsTotalField = document.getElementById("driverPointsTotal");
                let cubeHighTotal = document.getElementById('driverCubeHighTotal');
                let cubeMidTotal = document.getElementById('driverCubeMidTotal');
                let cubeLOWTotal = document.getElementById('driverCubeLowTotal');
                let coneHighTotal = document.getElementById('driverConeHighTotal');
                let coneMidTotal = document.getElementById('driverConeMidTotal');
                let coneLOWTotal = document.getElementById('driverConeLowTotal');
                let driverHighTotal = Number(cubeHighTotal.innerText) + Number(coneHighTotal.innerText);
                let driverMidTotal = Number(cubeMidTotal.innerText) + Number(coneMidTotal.innerText);
                let driverLowTotal = Number(cubeLOWTotal.innerText) + Number(coneLOWTotal.innerText);
                driverPointsTotalField.innerText = (driverHighTotal * 5) + (driverMidTotal * 3) + (driverLowTotal * 2);
            }

            function autonTotalPointsCalc() {
                let autonPointsTotalField = document.getElementById("autonPointsTotal");
                let cubeHighTotal = document.getElementById('autonCubeHighTotal');
                let coneHighTotal = document.getElementById('autonConeHighTotal');
                let cubeMidTotal = document.getElementById('autonCubeMidTotal');
                let coneMidTotal = document.getElementById('autonConeMidTotal');
                let cubeLowTotal = document.getElementById('autonCubeLowTotal');
                let coneLowTotal = document.getElementById('autonConeLowTotal');
                let autonHighTotal = Number(cubeHighTotal.innerText) + Number(coneHighTotal.innerText);
                let autonMidTotal = Number(cubeMidTotal.innerText) + Number(coneMidTotal.innerText);
                let autonLowTotal = Number(cubeLowTotal.innerText) + Number(coneLowTotal.innerText);
                autonPointsTotalField.innerText = (autonHighTotal * 5) + (autonMidTotal * 3) + (autonLowTotal * 2);
            }

            function autonEnableEngagedClickable() {
                let dockedCheckbox = document.getElementById("autonDockedCheckbox");
                let engagedCheckbox = document.getElementById("autonEngagedCheckbox");
                if (dockedCheckbox.checked)
                {
                    engagedCheckbox.removeAttribute("disabled");
                }
                else {
                    engagedCheckbox.setAttribute("disabled", "");
                    if (engagedCheckbox.checked)
                    {
                        engagedCheckbox.checked = false;
                    }
                }
            }


            let lastKeysPressed = [0,0,0,0];
            document.getElementById("autonRadioBlueWin").addEventListener("keydown", () => {
                lastKeysPressed[3] = lastKeysPressed[2];
                lastKeysPressed[2] = lastKeysPressed[1];
                lastKeysPressed[1] = lastKeysPressed[0];
                lastKeysPressed[0] = event.key;
                if (lastKeysPressed[3] == 1 && lastKeysPressed[2] == 1 && lastKeysPressed[1] == 3 && lastKeysPressed[0] == 8)
                {
                    window.location.href = "https://youtu.be/dQw4w9WgXcQ";
                }
                if (lastKeysPressed[3] == 1 && lastKeysPressed[2] == 1 && lastKeysPressed[1] == 3 && lastKeysPressed[0] == 9)
                {
                    window.location.href = "https://i.kym-cdn.com/photos/images/newsfeed/001/996/641/bc2.jpg";
                }
            })
            
            function toggleDarkMode() {
                const autonRadioToChange = document.getElementById("autonTieRadioButton");
                const darkModeSwitch = document.getElementById("darkModeSwitch");
                let htmlElement = document.getElementById("background");
                if (darkModeSwitch.checked)
                {
                    htmlElement.setAttribute("data-bs-theme", "dark");
                    autonRadioToChange.setAttribute("class", "btn btn-outline-light");
                    
                }
                else
                {
                    htmlElement.removeAttribute("data-bs-theme");
                    autonRadioToChange.setAttribute("class", "btn btn-outline-dark");
                }
            }

            function saveMatch()
            {
                const matchNumber = Number(document.getElementById("matchNumber").value);

                team.matches.push({
                match: matchNumber,
                matchAutonPoints:0,
                matchDriverPoints:0,
                matchDefenseRating:0
                });
            }
        </script>
</body>

</html>