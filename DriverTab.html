<!DOCTYPE html>
<html>

<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
</head>

<body>
    <h1>Match Scoring</h1>
    <!--start with an input area to enter the team number and the match number-->
   
    <label for="teamNumber">Team Number:</label>

    <input type="number" id="teamNumber" required
           minlength="2" maxlength="6" size="8">

    <label for="matchNumber">Match Number:</label>

    <input type="number" id="matchNumber" required
           minlength="1" maxlength="2" size="4">
    <div class="mb-1">
        <button onclick="saveMatch()" class="btn btn-primary">Save</button>
     </div>

       
    <!--Define tabs-->
    <ul class="nav nav-pills mb-3" id="pills-tab">
        <li class="nav-item">
            <button class="nav-link active" id="pills-autonomous-tab" data-bs-toggle="pill"
                data-bs-target="#pills-autonomous" type="button">Autonomous</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="pills-drivercontrol-tab" data-bs-toggle="pill"
                data-bs-target="#pills-drivercontrol" type="button">Driver Control</button>
        </li>
        <li class="nav-item">
            <button class="nav-link" id="pills-team-tab" data-bs-toggle="pill" data-bs-target="#pills-team"
                type="button">Team Information</button>
        </li>
            <li class="nav-item">
            <button class="nav-link" id="pills-match-tab" data-bs-toggle="pill" data-bs-target="#pills-match"
                type="button">Match Results</button>
        </li>

    </ul>

<!--add content for each of the defined tabs-->
    <div class="tab-content">

        <!--Autonomous -->
        <div class="tab-pane fade show active" id="pills-autonomous">
            <h3>Autonomous Scoring</h3>
            <p>
            <div class="text-center">
                <span id="autonPointsTotal">0</span> Autonomous Points
                <div class="mb-1">
                    <button onclick="adjustDisplay(1,'autonPointsTotal')" class="btn btn-primary">Add Block</button>
                    <button onclick="adjustDisplay(-1,'autonPointsTotal')" class="btn btn-danger">Remove Block</button>
                </div>
                <div class="mb-1">
                    <button onclick="adjustDisplay(2,'autonPointsTotal')" class="btn btn-primary">Add Cone</button>
                    <button onclick="adjustDisplay(-2,'autonPointsTotal')" class="btn btn-danger">Remove Cone</button>
                </div>
            </div>
            </p>
        </div>

        <!--Driver Control-->
        <div class="tab-pane fade" id="pills-drivercontrol">
            <h3>Driver Control Scoring</h3>
            
            <div class="text-center">
                <span id="driverPointsTotal">0</span> Driver Control Points 
                <div>
                    
                    
                    <div>
                    <div class="d-flex justify-content-center">
                        
                        <div style="width: 22rem;">
                            <p>Cube</p>
                        </div>
                           <p>Cone</p>
                     
                    
                    </div>    
                    </div>
                    </div>
                
                <!--High-->
                <div class="d-flex justify-content-center">
                    <div style="width: 9rem;">
                        <p> </p>
                    </div>
                    <p id="driverCubeHighTotal">0</p>
                    <div style="width: 12rem;"></div>
                    <p id="driverConeHighTotal">0 </p>
                </div>
                
                
                <div class="d-flex justify-content-center">
                        <div style="width: 2rem;">
                            <p>High</p>
                        </div>
                        <div style="width: 5rem;"></div>
                        <div>
                            <button onclick="adjustDisplay(1,'driverCubeHighTotal')" class="btn btn-primary btn-lg">+</button>
                            <button onclick="adjustDisplay(-1,'driverCubeHighTotal')" class="btn btn-danger btn-lg">-</button>
                        </div>
                        <div style="width: 6rem;"></div>
                        <div>
                            
                            <button onclick="adjustDisplay(1,'driverConeHighTotal')" class="btn btn-primary btn-lg">+</button>
                            <button onclick="adjustDisplay(-1,'driverConeHighTotal')" class="btn btn-danger btn-lg">-</button>
                        </div>
                </div>
           
                <!--Mid-->
              
                
                <div class="d-flex justify-content-center">
                    <div style="width: 9rem;">
                        <p> </p>
                    </div>
                    <p id="driverCubeMidTotal">0</p>
                    <div style="width: 12rem;"></div>
                    <p id="driverConeMidTotal">0 </p>
                </div>

                <div class="d-flex justify-content-center">
                    
                    <div style="width: 2rem;">
                        <p>Mid</p>
                    </div>
                    <div style="width: 5rem;"></div>
                    <div>
                        
                        <button onclick="adjustDisplay(1,'driverCubeMidTotal')" class="btn btn-primary btn-lg">+</button>
                        <button onclick="adjustDisplay(-1,'driverCubeMidTotal')" class="btn btn-danger btn-lg">-</button>
                    </div>
                    <div style="width: 6rem;"></div>
                    <div >
                        
                        <button onclick="adjustDisplay(1,'driverConeMidTotal')" class="btn btn-primary btn-lg">+</button>
                        <button onclick="adjustDisplay(-1,'driverConeMidTotal')" class="btn btn-danger btn-lg">-</button>
                    </div>
                </div>
                <!--Low-->
                
                <div class="d-flex justify-content-center">
                    <div style="width: 9rem;">
                        <p> </p>
                    </div>
                    <p id="driverCubeLowTotal">0</p>
                    <div style="width: 12rem;"></div>
                    <p id="driverConeLowTotal">0 </p>
                </div>

                <div class="d-flex justify-content-center">
                    <div style="width: 2rem;">
                        <p>Low</p>
                    </div>
                    <div style="width: 5rem;"></div>
                    <div>
                        
                        
                        <button onclick="adjustDisplay(1,'driverCubeLowTotal')" class="btn btn-primary btn-lg">+</button>
                        <button onclick="adjustDisplay(-1,'driverCubeLowTotal')" class="btn btn-danger btn-lg">-</button>
                    </div>
                    <div style="width: 6rem;"></div>
                    <div >
      
                        
                        <button onclick="adjustDisplay(1,'driverConeLowTotal')" class="btn btn-primary btn-lg btn-lg">+</button>
                        <button onclick="adjustDisplay(-1,'driverConeLowTotal')" class="btn btn-danger btn-lg">-</button>
                    </div>
                </div>

            
                <div>
                    
                    <div style="width: 40rem;">
                        <label for="driverOffense" class="form-label">Offense</label>
                        <input oninput="driverRangeLevel('driverOffense','driverOffenseTotal')" type="range" class="form-range" min="0" max="10" id="driverOffense" value="0">
                    </div> 
                    <div class="d-flex justify-content-center">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Docked?
                        </label>
                    </div>
                    <div class="d-flex justify-content-center">
                        <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                        Engaged?
                        </label>
                    </div>
                    <span id="driverDefenseTotal">0</span>
                    <span id="driverOffenseTotal">0</span>
                    <div style="width: 40rem;">
                        <label for="driverDefense" class="form-label">Defense</label>
                        <input oninput="driverRangeLevel('driverDefense','driverDefenseTotal')" type="range" class="form-range" min="0" max="10" id="driverDefense" value="0">
                    </div>  
                </div>
            </div>
        </div>
            </p>
        </div>

        <!--Teams Information page-->
        <div class="tab-pane fade" id="pills-team">
            <h3>Team Information Page</h3>
            <p>
            <div class="text-center">
                <span id="teamInfo">Team Information Page</span>
            </div>
            </p>
        </div>
        
         <!--Match Results page-->
         <!-- This shows the final results of the match from Blue Alliance. It includes all the teams in the match, and the official results. It also includes all of the data we have collected on the match-->
        <div class="tab-pane fade" id="pills-team">
            <h3>Match Results Page</h3>
            <p>
            <div class="text-center">
                <span id="matchResults">Match Results Page</span>
            </div>
            
        </div>

        <script>

            let team = {
                nunber: null,
                competition: null,
                teamNotes:null,
                matches:[]
            }
            let totalPoints = {

            }

            // This is a java script comment. We are doing inline javascript
            // Javascript has 3 levels of variables - var, let and const. Var - global variable. Wonky. let - similar to var, but preserves scope. const is a constant memory location that can be defined once.
            function save() {
                team.number=Number(document.getElementById("teamNumber").value);
                const data = JSON.stringify(team);
                window.localStorage.setItem("teamInfo", data);
            }

            function load() {
                const data = window.localStorage.getItem("teamInfo")
                team = JSON.parse(data);
            }

            function adjustDisplay(amt,pointTarget) {
                const pointsTotalField = document.getElementById(pointTarget);
                let pointsTotalArr = String(pointsTotalField.innerText);
                let pointsTotalArr2 = pointsTotalArr.split(" ");
                const pointsTotal = Number(pointsTotalArr2[0]);
                if (pointsTotal + amt < 0) {
                    pointsTotalField.innerText = 0; 
                }
                else {
                    pointsTotalField.innerText = pointsTotal + amt;
                    
                }
                driverTotalPointscalc();
            }
            function driverTotalPointscalc() {
                let driverPointsTotalField = document.getElementById("driverPointsTotal");
                let cubeHighTotal = document.getElementById('driverCubeHighTotal');
                let cubeMidTotal = document.getElementById('driverCubeMidTotal');
                let cubeLOWTotal = document.getElementById('driverCubeLowTotal');
                let coneHighTotal = document.getElementById('driverConeHighTotal');
                let coneMidTotal = document.getElementById('driverConeMidTotal');
                let coneLOWTotal = document.getElementById('driverConeLowTotal');
                let driverHighTotal = Number(cubeHighTotal.innerText) + Number(coneHighTotal.innerText);
                let driverMidTotal = Number(cubeMidTotal.innerText) + Number(coneMidTotal.innerText);
                let driverLowTotal = Number(cubeLOWTotal.innerText) + Number(coneLOWTotal.innerText);
                driverPointsTotalField.innerText = (driverHighTotal * 5) + (driverMidTotal * 3) + (driverLowTotal * 2);
            }
            function driverRangeLevel(rangeinput,target) {
                driverRangeFeild = document.getElementById(rangeinput);
                driverRangeTotal = document.getElementById(target);
                driverRangeTotal.innerText = driverRangeFeild.value;  
                

                
            }
            function saveMatch()
            {
                const matchNumber = Number(document.getElementById("matchNumber").value);

                team.matches.push({
                match: matchNumber,
                matchAutonPoints:0,
                matchDriverPoints:0,
                matchDefenseRating:0
                });
            }
               function LoadMatch()
            {
                const matchNumber = Number(document.getElementById("matchNumber").value);

                team.matches.push({
                match: matchNumber,
                matchAutonPoints:0,
                matchDriverPoints:0,
                matchDefenseRating:0
                });
            }
        </script>
</body>

</html>